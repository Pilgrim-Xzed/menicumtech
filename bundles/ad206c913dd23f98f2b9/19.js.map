{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/ImportE2eKeysDialog.js","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.js"],"names":["createReactClass","displayName","propTypes","matrixClient","PropTypes","instanceOf","MatrixClient","isRequired","onFinished","func","getInitialState","enableSubmit","phase","errStr","UNSAFE_componentWillMount","this","_unmounted","_file","createRef","_passphrase","componentWillUnmount","_onFormChange","ev","files","current","setState","value","length","_onFormSubmit","preventDefault","_startImport","file","passphrase","Promise","resolve","reject","reader","FileReader","onload","e","target","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","props","importRoomKeys","JSON","parse","catch","console","error","msg","friendlyText","_t","_onCancelClick","render","BaseDialog","sdk","disableForm","state","className","title","onSubmit","htmlFor","ref","id","type","autoFocus","onChange","disabled","size","onClick","TextEncoder","window","TextEncodingUtf8","TextDecoder","subtleCrypto","crypto","subtle","webkitSubtle","friendlyError","Error","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","decode","Uint8Array","lineStart","lineEnd","indexOf","line","slice","trim","HEADER_LINE","dataStart","undefined","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","aesProm","hmacProm","all","String","fromCharCode","apply","btoa"],"mappings":"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","file":"bundles/ad206c913dd23f98f2b9/19.js","sourceRoot":""}